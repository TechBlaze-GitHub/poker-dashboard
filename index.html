<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poker Night Dashboard</title>
<style>
  body { font-family: Arial; background-color: #0b3d91; color: #fff; text-align: center; padding: 20px; }
  h1 { margin-bottom: 10px; }
  #live-number {
    font-size: 72px;
    font-weight: bold;
    margin: 20px 0;
    transition: transform 0.2s, color 0.2s;
    display: inline-block;
  }
  #change-indicator {
    font-size: 48px;
    margin-left: 10px;
    vertical-align: middle;
    transition: opacity 0.5s;
    opacity: 0;
  }
  .flash {
    color: #ff9800;
    transform: scale(1.3);
  }
  table { margin: 20px auto; border-collapse: collapse; width: 50%; }
  th, td { border: 1px solid #fff; padding: 10px; }
  th { background-color: #062f6c; }
</style>
</head>
<body>

<h1>Poker Night Dashboard</h1>

<div>
  <h2>Prize Pool</h2>
  <div>
    <span id="live-number">0</span>
    <span id="change-indicator"></span>
  </div>
</div>

<div>
  <h2>Chip Values</h2>
  <table>
    <tr><th>Chip</th><th>Value</th></tr>
    <tr><td>White</td><td>$1</td></tr>
    <tr><td>Red</td><td>$5</td></tr>
    <tr><td>Green</td><td>$25</td></tr>
    <tr><td>Black</td><td>$100</td></tr>
  </table>
</div>

<div>
  <h2>Poker Hand Rankings</h2>
  <table>
    <tr><th>Hand</th><th>Example</th></tr>
    <tr><td>Royal Flush</td><td>Aâ™  Kâ™  Qâ™  Jâ™  10â™ </td></tr>
    <tr><td>Straight Flush</td><td>9â™£ 8â™£ 7â™£ 6â™£ 5â™£</td></tr>
    <tr><td>Four of a Kind</td><td>Kâ™£ Kâ™¦ Kâ™¥ Kâ™  5â™£</td></tr>
    <tr><td>Full House</td><td>Qâ™£ Qâ™¦ Qâ™¥ 8â™  8â™£</td></tr>
    <tr><td>Flush</td><td>2â™£ 6â™£ 9â™£ Jâ™£ Kâ™£</td></tr>
    <tr><td>Straight</td><td>5â™  6â™¦ 7â™£ 8â™  9â™¥</td></tr>
    <tr><td>Three of a Kind</td><td>7â™£ 7â™¦ 7â™  2â™  4â™£</td></tr>
    <tr><td>Two Pair</td><td>Jâ™£ Jâ™¦ 4â™£ 4â™  9â™¥</td></tr>
    <tr><td>One Pair</td><td>10â™  10â™¥ 3â™£ 6â™¦ Kâ™ </td></tr>
    <tr><td>High Card</td><td>Aâ™¦ Jâ™£ 8â™  6â™£ 3â™ </td></tr>
  </table>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>
<script>
  const publicSheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSHnwMY9_-MphAllzlCL1U87IImxlSPgcs1sJpeZ7yQLzwzlfnGu71oaef3j1V2WoQ9L5sJ5sX8ZlC8/pubhtml";
  let currentNumber = 0;

  function flashNumber() {
    const elem = document.getElementById('live-number');
    elem.classList.add('flash');
    setTimeout(() => elem.classList.remove('flash'), 300);
  }

  function showChangeIndicator(change) {
    const indicator = document.getElementById('change-indicator');
    if (change > 0) {
      indicator.textContent = 'ðŸ”º';
      indicator.style.color = '#00ff00';
    } else if (change < 0) {
      indicator.textContent = 'ðŸ”»';
      indicator.style.color = '#ff0000';
    } else {
      indicator.textContent = '';
    }
    indicator.style.opacity = 1;
    setTimeout(() => { indicator.style.opacity = 0; }, 1000);
  }

  function updateLiveNumber(data) {
    const number = parseInt(data['Number'] || data['number'] || data['A1'] || 0);
    const change = number - currentNumber;
    if (change !== 0) {
      currentNumber = number;
      document.getElementById('live-number').textContent = number;
      flashNumber();
      showChangeIndicator(change);
    }
  }

  Tabletop.init({
    key: publicSheetURL,
    simpleSheet: true,
    callback: function(data, tabletop) {
      updateLiveNumber(data[0]);
      setInterval(() => {
        tabletop.sheets("Sheet1").fetch(update => updateLiveNumber(update[0]));
      }, 5000);
    }
  });
</script>

</body>
</html>


